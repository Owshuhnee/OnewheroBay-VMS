@model VMS.WebApp.Models.Booking

@{
    ViewData["Title"] = "Booking Confirmed";
}

<div class="myaccount-card booking-confirm-shell">
    <section class="booking-layout booking-layout--confirm">

        <!-- LEFT: Booking Confirmation -->
        <section class="bookingcard-right confirm-card">
            <h2>Booking Confirmed</h2>
            <p>
                Thank you, @Model.User.FirstName! Your booking has been received.
            </p>

            <div class="ticket-shell">
                <div class="ticket-main">
                    <h3 class="ticket-title">@Model.Event.EventName</h3>

                    <dl class="booking-summary">
                        <div class="booking-summary-row">
                            <dt>Booking #</dt>
                            <dd>#@Model.BookingId</dd>
                        </div>

                        <div class="booking-summary-row">
                            <dt>Date</dt>
                            <dd>@Model.BookingDate.ToString("dd MMM yyyy")</dd>
                        </div>

                        <div class="booking-summary-row">
                            <dt>Time</dt>
                            <dd>@Model.BookingTime</dd>
                        </div>

                        <div class="booking-summary-row">
                            <dt>Guests</dt>
                            <dd>@Model.GuestCount</dd>
                        </div>

                        @if (!string.IsNullOrWhiteSpace(Model.SpecialRequest))
                        {
                            <div class="booking-summary-row">
                                <dt>Special request</dt>
                                <dd>@Model.SpecialRequest</dd>
                            </div>
                        }

                        <div class="booking-summary-row">
                            <dt>Total</dt>
                            <dd>@Model.TotalPrice.ToString("C")</dd>
                        </div>

                        <div class="booking-summary-row">
                            <dt>Status</dt>
                            <dd>@Model.BookingStatus</dd>
                        </div>
                    </dl>
                </div>

                <div class="ticket-qr">
                    <img src="@Url.Action("TicketQr", "BookingsFE", new { id = Model.BookingId })"
                         alt="Entry QR code"
                         class="ticket-qr-img" />

                    <p class="ticket-qr-note">
                        Show this QR code at the park entrance for verification.
                    </p>
                </div>
            </div>

            <div class="booking-actions">
                <!-- LEFT: primary -->
                <a asp-controller="BookingsFE"
                   asp-action="MyBookings"
                   class="btn btn-primary">
                    View My Bookings
                </a>

                <!-- RIGHT: secondary -->
                <a asp-controller="EventsFE"
                   asp-action="Index"
                   class="btn btn-secondary">
                    Back to Events
                </a>
            </div>
        </section>


        <!-- RIGHT: Event Summary -->
        <article class="event-card confirm-event-card">
            <div class="event-media">
                <img src="@(string.IsNullOrWhiteSpace(Model.Event.EventImage)
                                         ? "/img/homepage1.png"
                                         : Model.Event.EventImage)"
                     alt="@Model.Event.EventName" />

                <span class="event-interest-tag">Booked</span>
            </div>

            <div class="event-body">
                <h3 class="event-title">@Model.Event.EventName</h3>

                <p class="event-schedule-day">
                    @(string.IsNullOrWhiteSpace(Model.Event.Schedule)
                                        ? "Schedule to be confirmed"
                                        : Model.Event.Schedule)
                </p>

                <p class="event-desc">
                    @Model.Event.Description
                </p>

                <div class="event-footer">
                    <div class="event-info-row">
                        <span class="event-price">@Model.TotalPrice.ToString("C")</span>
                        <span class="event-slots">Guests: @Model.GuestCount</span>
                    </div>
                </div>
            </div>
        </article>

    </section>
</div>
