@{
    ViewData["Title"] = "Home Page";
}

<div class="auth-wrapper">
    <div id="authCard" class="auth-card">
        <!-- LEFT/RIGHT: this section (forms) will be on the LEFT for login -->
        <div class="auth-content">
            <div class="form-container">
                <!-- Login Form (Visible by default) -->
                <form id="loginForm"
                      class="auth-form"
                      method="post"
                      action="/Home/Login">
                    <h2>Login</h2>

                    <label for="loginEmail">Email</label>
                    <input type="email" id="loginEmail" name="Email" required />

                    <label for="loginPassword">Password</label>
                    <input type="password" id="loginPassword" name="Password" required />

                    <button type="submit">Login</button>
                    <p>
                        Don't have an account?
                        <a href="#" id="showRegister">Register here</a>
                    </p>
                </form>

                <!-- Registration Form (Hidden initially) -->
                <form id="registerForm"
                      class="auth-form hidden"
                      method="post"
                      asp-action="Register">
                    <h2>Register</h2>

                    @* no role input, we force Visitor in backend/db *@

                    <label for="firstName">First Name</label>
                    <input type="text" id="firstName" name="FirstName" required />

                    <label for="lastName">Last Name</label>
                    <input type="text" id="lastName" name="LastName" required />

                    <label for="phone">Phone</label>
                    <input type="tel" id="phone" name="Phone" required />

                    <label for="registerEmail">Email</label>
                    <input type="email" id="registerEmail" name="Email" required />

                    <label for="registerPassword">Password</label>
                    <input type="password" id="registerPassword" name="Password" required />

                    <label for="confirmPassword">Verify Password</label>
                    <input type="password" id="confirmPassword" name="ConfirmPassword" required />

                    <label>Interest</label>

                    <!-- clickable pills; use hidden input to send value(s) to backend -->
                    <div id="interestChips" class="interest-group">
                        <button type="button" class="chip" data-value="Music">Music</button>
                        <button type="button" class="chip" data-value="Sports">Sports</button>
                        <button type="button" class="chip" data-value="Conferences">Conferences</button>
                        <button type="button" class="chip" data-value="Workshops">Workshops</button>
                        <button type="button" class="chip" data-value="Festivals">Festivals</button>
                    </div>
                    <input type="hidden" id="interestHidden" name="Interest" />

                    <button type="submit">Register</button>
                    <p>
                        Already have an account?
                        <a href="#" id="showLogin">Login here</a>
                    </p>
                </form>
            </div>
        </div>

        <!-- IMAGE SIDE: on the RIGHT for login, moves to LEFT in register mode -->
        <div class="auth-image"></div>
    </div>
</div>



<script>
    const loginForm = document.getElementById('loginForm');
    const registerForm = document.getElementById('registerForm');
    const authCard = document.getElementById('authCard');

    const showRegisterLink = document.getElementById('showRegister');
    const showLoginLink = document.getElementById('showLogin');

    // Switch Login -> Register
    showRegisterLink.onclick = (e) => {
        e.preventDefault();
        loginForm.classList.add('hidden');
        registerForm.classList.remove('hidden');

        // flip layout: image LEFT, form RIGHT for register
        authCard.classList.add('register-mode');
    };

    // Switch Register -> Login
    showLoginLink.onclick = (e) => {
        e.preventDefault();
        registerForm.classList.add('hidden');
        loginForm.classList.remove('hidden');

        // normal layout: form LEFT, image RIGHT for login
        authCard.classList.remove('register-mode');
    };

    // Interest chips selection logic
    const chipsContainer = document.getElementById('interestChips');
    const interestHidden = document.getElementById('interestHidden');

    chipsContainer.addEventListener('click', (e) => {
        const chip = e.target.closest('.chip');
        if (!chip) return;

        chip.classList.toggle('selected');

        const selectedValues = Array.from(
            chipsContainer.querySelectorAll('.chip.selected')
        ).map(c => c.dataset.value);

        // send comma-separated interests to backend via hidden input
        interestHidden.value = selectedValues.join(', ');
    });

    // Simple client-side password match check
    registerForm.addEventListener('submit', (e) => {
        const pwd = document.getElementById('registerPassword').value;
        const confirm = document.getElementById('confirmPassword').value;

        if (pwd !== confirm) {
            e.preventDefault();
            alert('Passwords do not match. Please re-enter.');
        }
    });
</script>
